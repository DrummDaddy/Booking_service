README.md
Сервис бронирования билетов
Этот проект представляет собой API-сервис для бронирования билетов на мероприятия. Ниже описан каждый файл, включённый в проект, а также ключевые функции и их назначение. 


Структура проекта
1. Файл: ticket_repository.go
Этот файл содержит логику для работы с коллекцией MongoDB, отвечающей за билеты (tickets).
Основные функции:

- ReserveTicketsРезервирует указанное количество билетов для конкретного мероприятия и типа билета. Увеличивает счётчик проданных билетов.

Требует проверки доступности мест (проверка, что остаток >= запрашиваемое количество).
Параметры: context, eventID, ticketTypeID, quantity.
Возвращает: ошибку, если бронирование не удалось.


- ReleaseTicketsСнимает резерв с указанного количества мест.

Параметры: context, eventID, ticketTypeID, quantity.
Возвращает: ошибку, если не удалось снять резерв.


- ConfirmSaleЗаглушка для логики подтверждения продажи билетов. Работа над этой функцией ещё не завершена.



2. Файл: models.go
Содержит основные структуры данных для работы с сервисом: бронирования, билеты, мероприятия и т. д.
Основные модели:

- Booking Описывает структуру для бронирования: пользователь, мероприятие, статус, билеты, сумма заказа, валюта и время резервирования.

- BookingTicket Описание забронированного билета: тип, количество, цена, места.

- Seat Подробное описание места: сектор, ряд, номер.

- TicketType Модель для типа билетов мероприятия: количество, продано, цена.

Перечисление (BookingStatus)Возможные статусы бронирования:

reserved
pending
confirmed
cancelled
expired




3. Файл: booking_repositories.go
Реализует логику работы с коллекцией MongoDB для бронирований (bookings).
Основные функции:

- Create Создаёт новое бронирование.

Параметры: context, booking.
Возвращает: ошибку в случае неудачи.


- FindByID
Находит бронирование по его ID.

Параметры: context, id.
Возвращает: объект бронирования или ошибку.


- FindByIDAndUser Находит бронирование по ID и ID пользователя.

Параметры: context, id, userID.
Возвращает: бронирование или ошибку.


- UpdateStatus Обновляет статус бронирования.

Параметры: context, id, status.
Возвращает: ошибку, если обновить не удалось.


- FindExpiredReservation Ищет все бронирования, у которых истёк срок резервирования.

Возвращает: список бронирований с истёкшей бронью.




4. Файл: event_repository.go
Содержит функции для работы с коллекцией мероприятий (events).
Основная функция:

- FindByID Находит мероприятие по его ID.
Параметры: context, id.
Возвращает: объект мероприятия или ошибку.




5. Файл: redis_cache.go
Реализует базовый клиент для работы с Redis с использованием библиотеки go-redis. Redis может использоваться для кеширования данных о бронированиях.
Основные компоненты:

- RedisCache Структура, содержащая клиент Redis.
- NewRedisCache Создаёт новый экземпляр Redis-клиента с заданными параметрами:
addr — адрес сервера Redis;
password — пароль (если требуется);
db — номер базы данных.




6. Файл: services.go
Ключевой файл, реализующий бизнес-логику бронирований.
Основные функции:

- CreatingBooking Создаёт новое бронирование. Проверяет параметры, резервирует билеты, сохраняет информацию о бронировании.

Использует: validateBookingRequest, reserveTickets, и др.
Возвращает: подробный ответ с информацией о бронировании (BookingResponse).


- validateBookingRequest Проверяет корректность запроса нового бронирования.

Возвращает: ошибку в случае некорректных данных.


- reserveTickets Резервирует места и сохраняет информацию о них.

Возвращает: список забронированных билетов.


- calculateSubtotal и calculateServiceFee Рассчитывают итоговую стоимость билетов и сервисные сборы.

- releaseTickets Снимает резервирование с билетов, если бронирование не удалось.

- GetBooking Получает информацию о бронировании по ID бронирования и пользователя.

- ConfirmBooking Подтверждает бронирование после полной оплаты.

- CancelBooking Отменяет бронирование, освобождая зарезервированные билеты.



7. Файл: payment_services.go
Представляет заглушку для реализации платёжного сервиса.
Основные функции:

- NewPaymentService Создаёт и возвращает новый экземпляр сервиса.


Используемые технологии

MongoDB: для работы с данными о пользователях, бронированиях, мероприятиях и билетах.
Redis: для кеширования временных данных.
Go: язык программирования.


Инструкция для разработчиков и тестировщиков

Установите все зависимости проекта.
Настройте доступ к базе данных MongoDB и Redis.
Ознакомьтесь с ключевыми зависимостями и бизнес-логикой в файле services.go.
Следуйте логике бронирования, начиная с вызова функции CreatingBooking.


Этот README описывает только текущее состояние проекта. По мере улучшения функциональности он будет дополняться.
